<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>MySQL 学习 | tiger BeA</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/assets/logo.svg">
    <meta name="description" content="个人笔记">
    <link rel="preload" href="/blog/assets/css/0.styles.d319823d.css" as="style"><link rel="preload" href="/blog/assets/js/app.293201d0.js" as="script"><link rel="preload" href="/blog/assets/js/2.d7b159a0.js" as="script"><link rel="preload" href="/blog/assets/js/17.09f65d83.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.18f7d877.js"><link rel="prefetch" href="/blog/assets/js/11.0112076c.js"><link rel="prefetch" href="/blog/assets/js/12.b0386b46.js"><link rel="prefetch" href="/blog/assets/js/13.a31bc1e6.js"><link rel="prefetch" href="/blog/assets/js/14.5d36b6d3.js"><link rel="prefetch" href="/blog/assets/js/15.cf5b162b.js"><link rel="prefetch" href="/blog/assets/js/16.844d7a2a.js"><link rel="prefetch" href="/blog/assets/js/3.fd9c5d47.js"><link rel="prefetch" href="/blog/assets/js/4.1d153079.js"><link rel="prefetch" href="/blog/assets/js/5.ebadb9e3.js"><link rel="prefetch" href="/blog/assets/js/6.29cd37cb.js"><link rel="prefetch" href="/blog/assets/js/7.cd5bf533.js"><link rel="prefetch" href="/blog/assets/js/8.8d754837.js"><link rel="prefetch" href="/blog/assets/js/9.d54d0536.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.d319823d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="nav-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/blog/" class="router-link-active no-logo home-link"><!----> <span class="site-name">tiger BeA</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/blog/" class="router-link-active">
          首页
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          技术
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/blog/gardening/">
          园艺
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/tiger-BeA?tab=repositories" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/blog/technology/server/" aria-current="page" title="后端相关笔记" class="sidebar-link">后端相关笔记</a></li><li><a href="/blog/technology/server/concurrency.html" title="并发化举例" class="sidebar-link">并发化举例</a></li><li><a href="/blog/technology/server/share-mySQL.html" aria-current="page" title="MySQL 学习" class="active sidebar-link">MySQL 学习</a><ul class="sidebar-sub-headers"></ul></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="mysql-学习"><a href="#mysql-学习" class="header-anchor">#</a> MySQL 学习</h1> <h3 id="为什么数据库的索引是用-b-树而不是红黑树"><a href="#为什么数据库的索引是用-b-树而不是红黑树" class="header-anchor">#</a> 为什么数据库的索引是用 B+ 树而不是红黑树？</h3> <p>从时间复杂性和空间局部性考虑</p> <ul><li>B+ 树叶子节点是有序的，大部分情况下不必遍历 IO</li></ul> <h3 id="消息队列有-push-和-pull-两种模型-优劣是什么"><a href="#消息队列有-push-和-pull-两种模型-优劣是什么" class="header-anchor">#</a> 消息队列有 push 和 pull 两种模型，优劣是什么？</h3> <p><a href="https://cloud.tencent.com/document/product/406/4791" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/document/product/406/4791<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>Server 端用 push，则感受不到消费者的压力大小（可扩展性不高）
<ul><li>对 Server 压力也很大，例如多来了几个 consumerGroup，不管 group 里的 consumer 数量有多少，都要开对应数量的线程对应提供 push 通道</li></ul></li></ul> <h3 id="为什么-kfk-更快"><a href="#为什么-kfk-更快" class="header-anchor">#</a> 为什么 KFK 更快？</h3> <ul><li>减少  I/O —— 网络 IO 和磁盘 IO</li></ul> <h3 id="金额数据存储使用整型或-decimal-型存储-尽可能使用整型-禁止使用-float-或者-double"><a href="#金额数据存储使用整型或-decimal-型存储-尽可能使用整型-禁止使用-float-或者-double" class="header-anchor">#</a> 金额数据存储使用整型或 DECIMAL 型存储，尽可能使用整型，禁止使用 FLOAT 或者 DOUBLE</h3> <p>产生浮点数计算精度不准确的原因： 在计算机角度，计算机算的是二进制，而不是十进制。二进制后变成了无线不循环的数，而计算机可支持浮点数的小数部分可支持到52位，所有两者相加，在转换成十进制，得到的数就不准确了，加减乘除运算原理一样。</p> <div class="language- extra-class"><pre class="language-text"><code>十进制     二进制 
0.1      0.0001 1001 1001 1001 ... 
0.2      0.0011 0011 0011 0011 ... 
0.3      0.0100 1100 1100 1100 ... 
0.4      0.0110 0110 0110 0110 ... 
0.5      0.1 
0.6      0.1001 1001 1001 1001 ... 
</code></pre></div><p>故而0.1 + 0.2 后得到这么一串 <strong>0.0100110011001100110011001100110011001100110011001100</strong> 因浮点数小数位的限制而截断的二进制数字，这时候，我们再把它转换为十进制，就成了 <strong>0.30000000000000004</strong>。</p> <p>解决方案：高精度小数的采用 decimal（js 中也可以用 decimal.js）</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2021/12/2 下午12:16:42</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blog/technology/server/concurrency.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        并发化举例
      </a></span> <!----></p></div> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.293201d0.js" defer></script><script src="/blog/assets/js/2.d7b159a0.js" defer></script><script src="/blog/assets/js/17.09f65d83.js" defer></script>
  </body>
</html>